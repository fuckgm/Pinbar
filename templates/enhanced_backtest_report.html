<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Pinbarç­–ç•¥å›æµ‹æŠ¥å‘Š - ä¼˜åŒ–ç‰ˆ</title>
    <script src="https://cdn.plot.ly/plotly-latest.min.js"></script>
    <style>
        body { 
            font-family: Arial, sans-serif; 
            margin: 20px; 
            background: #f5f5f5;
            color: #333;
        }
        .container { 
            max-width: 1400px; 
            margin: 0 auto; 
            background: white; 
            padding: 20px; 
            border-radius: 5px;
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
        }
        h1, h2 { 
            color: #333;
            border-bottom: 2px solid #4CAF50;
            padding-bottom: 10px;
            margin-top: 30px;
        }
        .header {
            text-align: center;
            margin-bottom: 30px;
        }
        .info-row {
            text-align: center;
            color: #666;
            margin: 5px 0;
        }
        
        /* === ç´§å‡‘å‹æˆæœ¬åˆ†ææ ·å¼ === */
        .cost-summary {
            background: linear-gradient(135deg, #fff8e1 0%, #ffecb3 100%);
            border: 1px solid #ffa726;
            border-radius: 8px;
            padding: 15px;
            margin: 15px 0;
            box-shadow: 0 2px 8px rgba(255, 167, 38, 0.15);
        }
        
        .cost-summary h3 {
            color: #ef6c00;
            margin: 0 0 10px 0;
            border: none;
            font-size: 16px;
            font-weight: bold;
        }
        
        .compact-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(140px, 1fr));
            gap: 8px;
            margin-top: 10px;
        }
        
        .compact-item {
            background: rgba(255, 255, 255, 0.9);
            padding: 8px;
            border-radius: 6px;
            text-align: center;
            border-left: 3px solid #ffa726;
            transition: transform 0.2s;
        }
        
        .compact-item:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(0,0,0,0.1);
        }
        
        .compact-value {
            font-size: 14px;
            font-weight: bold;
            color: #ef6c00;
            margin-bottom: 3px;
        }
        
        .compact-label {
            font-size: 10px;
            color: #666;
            text-transform: uppercase;
            line-height: 1.2;
        }
        
        .compact-detail {
            font-size: 9px;
            color: #888;
            margin-top: 2px;
            line-height: 1.1;
        }
        
        /* === ç´§å‡‘å‹ä¿è¯é‡‘åˆ†ææ ·å¼ === */
        .margin-summary {
            background: linear-gradient(135deg, #e8f4fd 0%, #bbdefb 100%);
            border: 1px solid #42a5f5;
            border-radius: 8px;
            padding: 15px;
            margin: 15px 0;
            box-shadow: 0 2px 8px rgba(66, 165, 245, 0.15);
        }
        
        .margin-summary h3 {
            color: #1565c0;
            margin: 0 0 10px 0;
            border: none;
            font-size: 16px;
            font-weight: bold;
        }
        
        .margin-item {
            background: rgba(255, 255, 255, 0.9);
            padding: 8px;
            border-radius: 6px;
            text-align: center;
            border-left: 3px solid #42a5f5;
            transition: transform 0.2s;
        }
        
        .margin-item:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(0,0,0,0.1);
        }
        
        .margin-value {
            font-size: 14px;
            font-weight: bold;
            color: #1565c0;
            margin-bottom: 3px;
        }
        
        .margin-label {
            font-size: 10px;
            color: #666;
            text-transform: uppercase;
            line-height: 1.2;
        }
        
        .margin-detail {
            font-size: 9px;
            color: #1565c0;
            margin-top: 2px;
            line-height: 1.1;
        }
        
        /* è­¦å‘Šä¿¡æ¯ */
        .warning-info {
            background: #fff3cd; 
            padding: 8px 12px; 
            margin: 8px 0; 
            border-radius: 4px; 
            border-left: 4px solid #ffc107;
            font-size: 12px;
        }
        
        /* ç®€åŒ–æ‘˜è¦ç½‘æ ¼æ ·å¼ */
        .summary-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(160px, 1fr));
            gap: 12px;
            margin: 15px 0;
        }
        
        .summary-item {
            background: #f8f9fa;
            padding: 12px;
            border-radius: 6px;
            text-align: center;
            border-left: 4px solid #4CAF50;
            transition: transform 0.2s;
        }
        
        .summary-item:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(0,0,0,0.1);
        }
        
        .summary-value {
            font-size: 16px;
            font-weight: bold;
            margin-bottom: 4px;
        }
        
        .summary-label {
            font-size: 11px;
            color: #666;
            text-transform: uppercase;
        }
        
        /* é¢œè‰²æ ·å¼ */
        .positive { color: #4CAF50; }
        .negative { color: #f44336; }
        .warning { color: #ff9800; }
        
        /* ä¸€è¡Œæ˜¾ç¤ºçš„æ ¸å¿ƒç»Ÿè®¡ */
        .core-stats {
            background: linear-gradient(135deg, #f3e5f5 0%, #e1bee7 100%);
            border: 1px solid #ba68c8;
            border-radius: 8px;
            padding: 12px;
            margin: 15px 0;
            text-align: center;
            font-size: 14px;
            color: #6a1b9a;
            font-weight: 500;
        }
        
        .core-stats .stat-item {
            display: inline-block;
            margin: 0 15px;
            padding: 0 10px;
            border-right: 1px solid #ba68c8;
        }
        
        .core-stats .stat-item:last-child {
            border-right: none;
        }
        
        .core-stats .stat-value {
            font-weight: bold;
            font-size: 15px;
        }
        
        /* äº¤æ˜“è¡¨æ ¼æ ·å¼ */
        .trades-table {
            width: 100%;
            border-collapse: collapse;
            margin: 20px 0;
            font-size: 12px;
        }
        .trades-table th {
            background: #4CAF50;
            color: white;
            padding: 8px 4px;
            text-align: center;
            font-weight: normal;
            font-size: 11px;
        }
        .trades-table td {
            padding: 6px 4px;
            text-align: center;
            border-bottom: 1px solid #eee;
            font-size: 11px;
        }
        .trades-table tr {
            cursor: pointer;
            transition: background-color 0.3s;
        }
        
        .trades-table tr:hover {
            background-color: #e3f2fd;
        }
        
        /* æˆæœ¬æ˜ç»†æ ·å¼ */
        .cost-detail {
            font-size: 10px;
            color: #666;
            line-height: 1.2;
        }
        
        /* ç¿»é¡µæ§ä»¶æ ·å¼ */
        .pagination {
            text-align: center;
            margin: 20px 0;
        }
        .pagination button {
            background: #4CAF50;
            color: white;
            border: none;
            padding: 8px 15px;
            margin: 0 5px;
            cursor: pointer;
            border-radius: 3px;
            font-size: 14px;
        }
        .pagination button:hover {
            background: #45a049;
        }
        .pagination button:disabled {
            background: #ccc;
            cursor: not-allowed;
        }
        .pagination .page-info {
            display: inline-block;
            margin: 0 20px;
            color: #666;
        }
        .pagination select {
            padding: 5px;
            margin: 0 5px;
            border: 1px solid #ddd;
            border-radius: 3px;
        }
        
        /* å›¾è¡¨å®¹å™¨ */
        .chart-container {
            margin: 30px 0;
            padding: 20px;
            background: white;
            border: 1px solid #e0e0e0;
            border-radius: 5px;
        }
        
        /* æ ‡ç­¾é¡µ */
        .tabs {
            display: flex;
            margin-bottom: 20px;
            border-bottom: 2px solid #e0e0e0;
        }
        .tab {
            padding: 10px 20px;
            cursor: pointer;
            border-bottom: 3px solid transparent;
            transition: all 0.3s;
        }
        .tab:hover {
            background: #f5f5f5;
        }
        .tab.active {
            border-bottom-color: #4CAF50;
            color: #4CAF50;
        }
        .tab-content {
            display: none;
        }
        .tab-content.active {
            display: block;
        }
        
        /* äº¤æ˜“è¯¦æƒ…å¼¹çª— */
        .trade-modal {
            display: none;
            position: fixed;
            z-index: 1000;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0,0,0,0.5);
        }
        
        .trade-modal-content {
            background-color: white;
            margin: 2% auto;
            padding: 30px;
            border-radius: 15px;
            width: 90%;
            max-width: 1200px;
            max-height: 90%;
            overflow-y: auto;
        }
        
        .close {
            color: #aaa;
            float: right;
            font-size: 28px;
            font-weight: bold;
            cursor: pointer;
        }
        
        .close:hover {
            color: #000;
        }
        
        /* Kçº¿å›¾å®¹å™¨ */
        .kline-chart-container {
            width: 100%;
            height: 500px;
            margin-top: 20px;
            border: 1px solid #ddd;
            border-radius: 8px;
        }
        .trade-detail-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 20px;
            margin-bottom: 20px;
        }
        
        .trade-detail-item {
            padding: 10px;
            background: #f8f9fa;
            border-radius: 5px;
        }
        
        .trade-detail-item strong {
            color: #333;
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- å¤´éƒ¨ -->
        <div class="header">
            <h1>ğŸ“Š Pinbarç­–ç•¥å›æµ‹æŠ¥å‘Š - ä¼˜åŒ–ç‰ˆ</h1>
            <div class="info-row">ç”Ÿæˆæ—¶é—´: 2024-05-25 14:30:00</div>
            <div class="info-row">äº¤æ˜“å¯¹: BTCUSDT | å‘¨æœŸ: 1h</div>
            <div class="info-row">æ—¶é—´èŒƒå›´: 2024-01-01 ~ 2024-05-01</div>
        </div>
        
        <!-- === æ ¸å¿ƒç»Ÿè®¡ä¸€è¡Œæ˜¾ç¤º === -->
        <div class="core-stats">
            <div class="stat-item">
                <div class="stat-value">ç´¯è®¡æˆæœ¬: 126.57 USDT</div>
            </div>
            <div class="stat-item">
                <div class="stat-value">æ‰‹ç»­è´¹: 16.59 USDT</div>
            </div>
            <div class="stat-item">
                <div class="stat-value">èµ„é‡‘è´¹ç‡: 1.69 USDT</div>
            </div>
            <div class="stat-item">
                <div class="stat-value">æ»‘ç‚¹: 8.29 USDT</div>
            </div>
            <div class="stat-item">
                <div class="stat-value">æˆæœ¬å æ¯”: 8.6%</div>
            </div>
        </div>
        
        <!-- === ç´§å‡‘å‹æˆæœ¬åˆ†æåŒºåŸŸ === -->
        <div class="cost-summary">
            <h3>ğŸ’° äº¤æ˜“æˆæœ¬åˆ†æ</h3>
            <div class="compact-grid">
                <div class="compact-item">
                    <div class="compact-value">16.59 USDT</div>
                    <div class="compact-label">æ€»æ‰‹ç»­è´¹</div>
                    <div class="compact-detail">å¹³å‡: 0.83 USDT/ç¬”</div>
                </div>
                <div class="compact-item">
                    <div class="compact-value">1.69 USDT</div>
                    <div class="compact-label">èµ„é‡‘è´¹ç‡</div>
                    <div class="compact-detail">å¹³å‡: 0.08 USDT/ç¬”</div>
                </div>
                <div class="compact-item">
                    <div class="compact-value">8.29 USDT</div>
                    <div class="compact-label">æ»‘ç‚¹æˆæœ¬</div>
                    <div class="compact-detail">å¹³å‡: 0.41 USDT/ç¬”</div>
                </div>
                <div class="compact-item">
                    <div class="compact-value">26.57 USDT</div>
                    <div class="compact-label">æ€»æˆæœ¬</div>
                    <div class="compact-detail">å æ”¶ç›Š: 8.6%</div>
                </div>
                <div class="compact-item">
                    <div class="compact-value">62.4%</div>
                    <div class="compact-label">æ‰‹ç»­è´¹å æ¯”</div>
                </div>
                <div class="compact-item">
                    <div class="compact-value">6.4%</div>
                    <div class="compact-label">èµ„é‡‘è´¹ç‡å æ¯”</div>
                </div>
            </div>
        </div>
        
        <!-- === ç´§å‡‘å‹ä¿è¯é‡‘ä½¿ç”¨åˆ†æåŒºåŸŸ === -->
        <div class="margin-summary">
            <h3>ğŸ“ˆ ä¿è¯é‡‘ä½¿ç”¨åˆ†æ</h3>
            <div class="warning-info">
                âš ï¸ å‘ç° 2 ç¬”äº¤æ˜“çš„ä¿è¯é‡‘æ•°æ®å¼‚å¸¸ï¼Œå·²æ’é™¤ç»Ÿè®¡
            </div>
            
            <div class="compact-grid">
                <div class="margin-item">
                    <div class="margin-value">21.1%</div>
                    <div class="margin-label">å¹³å‡ä¿è¯é‡‘å ç”¨</div>
                    <div class="margin-detail">èŒƒå›´: 15.2% - 28.6%</div>
                </div>
                <div class="margin-item">
                    <div class="margin-value">4.7x</div>
                    <div class="margin-label">å¹³å‡æ æ†</div>
                    <div class="margin-detail">æœ€é«˜: 6.6x</div>
                </div>
                <div class="margin-item">
                    <div class="margin-value">168,480</div>
                    <div class="margin-label">æ€»ä»“ä½ä»·å€¼ (USDT)</div>
                    <div class="margin-detail">ä¿è¯é‡‘: 35,612 USDT</div>
                </div>
                <div class="margin-item">
                    <div class="margin-value">4.7</div>
                    <div class="margin-label">ä¿è¯é‡‘æ•ˆç‡</div>
                    <div class="margin-detail">ä»“ä½/ä¿è¯é‡‘æ¯”ç‡</div>
                </div>
                <div class="margin-item">
                    <div class="margin-value">
                        ç›ˆåˆ©: 19.5%<br>äºæŸ: 22.8%
                    </div>
                    <div class="margin-label">äº¤æ˜“ç±»å‹ä¿è¯é‡‘å¯¹æ¯”</div>
                </div>
                <div class="margin-item">
                    <div class="margin-value">
                        18/20<br>90.0%
                    </div>
                    <div class="margin-label">æ•°æ®å®Œæ•´åº¦</div>
                </div>
            </div>
        </div>
        
        <!-- æ ¸å¿ƒæŒ‡æ ‡æ‘˜è¦ - ç®€åŒ–ç‰ˆ -->
        <h2>å›æµ‹ç»“æœæ‘˜è¦</h2>
        
        <!-- ç¬¬ä¸€è¡Œï¼šæ ¸å¿ƒæ”¶ç›ŠæŒ‡æ ‡ -->
        <div class="summary-grid">
            <div class="summary-item">
                <div class="summary-value">10,000 USDT</div>
                <div class="summary-label">åˆå§‹èµ„é‡‘</div>
            </div>
            <div class="summary-item">
                <div class="summary-value">10,308 USDT</div>
                <div class="summary-label">æœ€ç»ˆèµ„é‡‘</div>
            </div>
            <div class="summary-item">
                <div class="summary-value positive">3.08%</div>
                <div class="summary-label">æ€»æ”¶ç›Šç‡</div>
            </div>
            <div class="summary-item">
                <div class="summary-value">20</div>
                <div class="summary-label">æ€»äº¤æ˜“æ¬¡æ•°</div>
            </div>
            <div class="summary-item">
                <div class="summary-value positive">65.0%</div>
                <div class="summary-label">èƒœç‡</div>
            </div>
        </div>
        
        <!-- ç¬¬äºŒè¡Œï¼šé£é™©æŒ‡æ ‡ -->
        <div class="summary-grid">
            <div class="summary-item">
                <div class="summary-value positive">1.85</div>
                <div class="summary-label">ç›ˆäºæ¯”</div>
            </div>
            <div class="summary-item">
                <div class="summary-value negative">-5.2%</div>
                <div class="summary-label">æœ€å¤§å›æ’¤</div>
            </div>
            <div class="summary-item">
                <div class="summary-value">0.125</div>
                <div class="summary-label">å¤æ™®æ¯”ç‡</div>
            </div>
            <div class="summary-item">
                <div class="summary-value">16.8 å°æ—¶</div>
                <div class="summary-label">å¹³å‡æŒä»“æ—¶é—´</div>
            </div>
            <div class="summary-item">
                <div class="summary-value">4 / 2</div>
                <div class="summary-label">æœ€å¤§è¿ç»­ç›ˆåˆ©/äºæŸ</div>
            </div>
        </div>
        
        <!-- ç¬¬ä¸‰è¡Œï¼šä¿¡å·è´¨é‡ç»Ÿè®¡ -->
        <div class="summary-grid">
            <div class="summary-item">
                <div class="summary-value">45</div>
                <div class="summary-label">æ€»æ£€æµ‹ä¿¡å·æ•°</div>
            </div>
            <div class="summary-item">
                <div class="summary-value">20</div>
                <div class="summary-label">æ‰§è¡Œä¿¡å·æ•°</div>
            </div>
            <div class="summary-item">
                <div class="summary-value">44.4%</div>
                <div class="summary-label">ä¿¡å·æ‰§è¡Œç‡</div>
            </div>
            <div class="summary-item">
                <div class="summary-value positive">65.0%</div>
                <div class="summary-label">ä¿¡å·æˆåŠŸç‡</div>
            </div>
            <div class="summary-item">
                <div class="summary-value">3.2/5</div>
                <div class="summary-label">å¹³å‡ä¿¡å·å¼ºåº¦</div>
            </div>
        </div>
        
        <!-- å›¾è¡¨å±•ç¤º -->
        <div class="tabs">
            <div class="tab active" onclick="showTab('enhanced_price')">ä»·æ ¼èµ°åŠ¿å›¾</div>
            <div class="tab" onclick="showTab('pnl_analysis')">æ”¶ç›Šåˆ†æ</div>
        </div>
        
        <div id="enhanced_price" class="tab-content active chart-container">
            <div id="priceChart" style="width:100%;height:400px;border:1px solid #ddd;border-radius:5px;display:flex;align-items:center;justify-content:center;color:#666;">
                ğŸ“ˆ ä»·æ ¼èµ°åŠ¿å›¾å°†åœ¨æ­¤æ˜¾ç¤º
            </div>
        </div>
        
        <div id="pnl_analysis" class="tab-content chart-container">
            <div id="pnlChart" style="width:100%;height:400px;border:1px solid #ddd;border-radius:5px;display:flex;align-items:center;justify-content:center;color:#666;">
                ğŸ“Š æ”¶ç›Šåˆ†æå›¾å°†åœ¨æ­¤æ˜¾ç¤º
            </div>
        </div>
        
        <!-- === äº¤æ˜“æ˜ç»†è¡¨æ ¼ - ç´§å‡‘ç‰ˆ === -->
        <h2>ğŸ“Š äº¤æ˜“è®°å½•æ˜ç»† (å…± 20 æ¡)</h2>
        
        <!-- ç¿»é¡µæ§ä»¶ï¼ˆé¡¶éƒ¨ï¼‰ -->
        <div class="pagination">
            <button onclick="firstPage()">é¦–é¡µ</button>
            <button onclick="prevPage()">ä¸Šä¸€é¡µ</button>
            <span class="page-info">
                ç¬¬ <span id="currentPage">1</span> é¡µ / å…± <span id="totalPages">1</span> é¡µ
            </span>
            <button onclick="nextPage()">ä¸‹ä¸€é¡µ</button>
            <button onclick="lastPage()">æœ«é¡µ</button>
            <span style="margin-left: 20px;">
                æ¯é¡µæ˜¾ç¤º: 
                <select id="pageSize" onchange="changePageSize()">
                    <option value="20" selected>20æ¡</option>
                    <option value="50">50æ¡</option>
                    <option value="100">100æ¡</option>
                </select>
            </span>
        </div>
        
        <table class="trades-table" id="tradesTable">
            <thead>
                <tr>
                    <th>åºå·</th>
                    <th>æ–¹å‘</th>
                    <th>å¼€ä»“æ—¶é—´</th>
                    <th>å¼€ä»“ä»·æ ¼</th>
                    <th>å¹³ä»“æ—¶é—´</th>
                    <th>å¹³ä»“ä»·æ ¼</th>
                    <th>ä»“ä½å¤§å°</th>
                    <th>æ æ†</th>
                    <th>ä¿è¯é‡‘å ç”¨</th>
                    <th>æ‰‹ç»­è´¹</th>
                    <th>èµ„é‡‘è´¹ç‡</th>
                    <th>æ»‘ç‚¹</th>
                    <th>æ¯›åˆ©æ¶¦</th>
                    <th>å‡€æ”¶ç›Š</th>
                    <th>æ”¶ç›Šç‡</th>
                    <th>ä¿¡å·å¼ºåº¦</th>
                    <th>å¹³ä»“åŸå› </th>
                </tr>
            </thead>
            <tbody id="tradesTableBody">
                <!-- ç¤ºä¾‹æ•°æ® -->
                <tr onclick="showTradeDetail(0)" style="cursor: pointer;">
                    <td>1</td>
                    <td><span style="color: green;">åšå¤š</span></td>
                    <td style="font-size: 10px;">2024-01-18 00:00</td>
                    <td>2531.2050</td>
                    <td style="font-size: 10px;">2024-01-18 16:00</td>
                    <td>2438.2803</td>
                    <td>3.3375</td>
                    <td>4x</td>
                    <td>
                        <div>2112 USDT</div>
                        <div class="margin-detail">21.1%</div>
                    </td>
                    <td>
                        <div style="color: #d68910; font-weight: bold;">16.59 USDT</div>
                        <div class="cost-detail">å¼€ä»“+å¹³ä»“</div>
                    </td>
                    <td>
                        <div style="color: #e67e22; font-weight: bold;">1.69 USDT</div>
                        <div class="cost-detail">æŒä»“æœŸé—´</div>
                    </td>
                    <td>
                        <div style="color: #8e44ad; font-weight: bold;">8.29 USDT</div>
                        <div class="cost-detail">ä¹°å–æ»‘ç‚¹</div>
                    </td>
                    <td class="negative">-310.14</td>
                    <td class="negative" style="font-weight: bold;">-336.71</td>
                    <td class="negative">-15.94%</td>
                    <td style="color: orange;">3/5</td>
                    <td>æ­¢æŸ</td>
                </tr>
            </tbody>
        </table>
        
        <!-- æ·»åŠ äº¤æ˜“è¯¦æƒ…å¼¹çª— -->
        <div id="tradeModal" class="trade-modal">
            <div class="trade-modal-content">
                <span class="close" onclick="closeTradeDetail()">&times;</span>
                <h2>äº¤æ˜“è¯¦æƒ…</h2>
                <div id="tradeDetailContent"></div>
                <div id="klineChart" class="kline-chart-container"></div>
            </div>
        </div>
    </div>
    
    <script>
        // ç¤ºä¾‹äº¤æ˜“æ•°æ®
        const allTrades = [
            {
                direction: 'buy',
                entry_time: '2024-01-18 00:00:00',
                entry_price: 2531.2050,
                exit_time: '2024-01-18 16:00:00',
                exit_price: 2438.2803,
                size: 3.3375,
                leverage: 4,
                required_margin: 2112,
                margin_ratio: 21.1,
                commission_costs: 16.59,
                funding_costs: 1.69,
                slippage_costs: 8.29,
                gross_profit: -310.14,
                profit: -336.71,
                profit_pct: -15.94,
                signal_strength: 3,
                reason: 'æ­¢æŸ'
            }
        ];
        
        let currentPage = 1;
        let pageSize = 20;
        let totalPages = Math.ceil(allTrades.length / pageSize);
        
        function showTradeDetail(tradeIndex) {
            const trade = allTrades[tradeIndex];
            if (!trade) return;
            
            const modal = document.getElementById('tradeModal');
            const content = document.getElementById('tradeDetailContent');
            
            content.innerHTML = `
                <h3>äº¤æ˜“ #${tradeIndex + 1} - è¯¦ç»†æˆæœ¬åˆ†æ</h3>
                <h4>ğŸ“Š äº¤æ˜“åŒºé—´Kçº¿å›¾</h4>
                <div id="tradeKlineChart" style="width: 100%; height: 450px; margin: 20px 0; border: 1px solid #ddd; border-radius: 8px; display: flex; align-items: center; justify-content: center; color: #666;">
                    ğŸ“ˆ Kçº¿å›¾å°†åœ¨æ­¤æ˜¾ç¤º (äº¤æ˜“æ—¶é—´æ®µ: ${trade.entry_time} ~ ${trade.exit_time})
                </div>
                
                <h4>ğŸ“‹ è¯¦ç»†ä¿¡æ¯è¡¨</h4>
                <table style="width: 100%; border-collapse: collapse; margin: 20px 0; font-size: 14px;">
                    <thead>
                        <tr style="background: #f8f9fa;">
                            <th style="padding: 12px; text-align: left; border: 1px solid #dee2e6; background: #e9ecef; font-weight: bold;">ç±»åˆ«</th>
                            <th style="padding: 12px; text-align: left; border: 1px solid #dee2e6; background: #e9ecef; font-weight: bold;">é¡¹ç›®</th>
                            <th style="padding: 12px; text-align: right; border: 1px solid #dee2e6; background: #e9ecef; font-weight: bold;">æ•°å€¼</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td rowspan="6" style="padding: 12px; border: 1px solid #dee2e6; background: #f8f9fa; font-weight: bold; vertical-align: top;">åŸºç¡€ä¿¡æ¯</td>
                            <td style="padding: 12px; border: 1px solid #dee2e6;">æ–¹å‘</td>
                            <td style="padding: 12px; border: 1px solid #dee2e6; text-align: right; font-weight: bold; color: ${trade.direction === 'buy' ? 'green' : 'red'};">${trade.direction === 'buy' ? 'ğŸŸ¢ åšå¤š' : 'ğŸ”´ åšç©º'}</td>
                        </tr>
                        <tr>
                            <td style="padding: 12px; border: 1px solid #dee2e6;">å¼€ä»“æ—¶é—´</td>
                            <td style="padding: 12px; border: 1px solid #dee2e6; text-align: right;">${trade.entry_time}</td>
                        </tr>
                        <tr>
                            <td style="padding: 12px; border: 1px solid #dee2e6;">å¼€ä»“ä»·æ ¼</td>
                            <td style="padding: 12px; border: 1px solid #dee2e6; text-align: right; font-weight: bold;">${trade.entry_price.toFixed(4)}</td>
                        </tr>
                        <tr>
                            <td style="padding: 12px; border: 1px solid #dee2e6;">å¹³ä»“æ—¶é—´</td>
                            <td style="padding: 12px; border: 1px solid #dee2e6; text-align: right;">${trade.exit_time}</td>
                        </tr>
                        <tr>
                            <td style="padding: 12px; border: 1px solid #dee2e6;">å¹³ä»“ä»·æ ¼</td>
                            <td style="padding: 12px; border: 1px solid #dee2e6; text-align: right; font-weight: bold;">${trade.exit_price.toFixed(4)}</td>
                        </tr>
                        <tr>
                            <td style="padding: 12px; border: 1px solid #dee2e6;">ä»“ä½å¤§å°</td>
                            <td style="padding: 12px; border: 1px solid #dee2e6; text-align: right; font-weight: bold;">${trade.size.toFixed(4)}</td>
                        </tr>
                        
                        <tr>
                            <td rowspan="5" style="padding: 12px; border: 1px solid #dee2e6; background: #e3f2fd; font-weight: bold; vertical-align: top;">ä¿è¯é‡‘ä¿¡æ¯</td>
                            <td style="padding: 12px; border: 1px solid #dee2e6;">æ æ†å€æ•°</td>
                            <td style="padding: 12px; border: 1px solid #dee2e6; text-align: right; font-weight: bold; color: #1976d2;">${trade.leverage}x</td>
                        </tr>
                        <tr>
                            <td style="padding: 12px; border: 1px solid #dee2e6;">ä»“ä½ä»·å€¼</td>
                            <td style="padding: 12px; border: 1px solid #dee2e6; text-align: right; font-weight: bold;">${(trade.size * trade.entry_price).toFixed(2)} USDT</td>
                        </tr>
                        <tr>
                            <td style="padding: 12px; border: 1px solid #dee2e6;">ä¿è¯é‡‘å ç”¨</td>
                            <td style="padding: 12px; border: 1px solid #dee2e6; text-align: right; font-weight: bold; color: #1976d2;">${trade.required_margin} USDT</td>
                        </tr>
                        <tr>
                            <td style="padding: 12px; border: 1px solid #dee2e6;">ä¿è¯é‡‘æ¯”ä¾‹</td>
                            <td style="padding: 12px; border: 1px solid #dee2e6; text-align: right; font-weight: bold;">${trade.margin_ratio}%</td>
                        </tr>
                        <tr>
                            <td style="padding: 12px; border: 1px solid #dee2e6;">ä¿è¯é‡‘å›æŠ¥</td>
                            <td style="padding: 12px; border: 1px solid #dee2e6; text-align: right; font-weight: bold; color: ${trade.profit >= 0 ? 'green' : 'red'};">${((trade.profit / trade.required_margin) * 100).toFixed(1)}%</td>
                        </tr>
                        
                        <tr>
                            <td rowspan="4" style="padding: 12px; border: 1px solid #dee2e6; background: #fff3e0; font-weight: bold; vertical-align: top;">æˆæœ¬æ˜ç»†</td>
                            <td style="padding: 12px; border: 1px solid #dee2e6;">æ‰‹ç»­è´¹</td>
                            <td style="padding: 12px; border: 1px solid #dee2e6; text-align: right; font-weight: bold; color: #d68910;">${trade.commission_costs} USDT</td>
                        </tr>
                        <tr>
                            <td style="padding: 12px; border: 1px solid #dee2e6;">èµ„é‡‘è´¹ç‡</td>
                            <td style="padding: 12px; border: 1px solid #dee2e6; text-align: right; font-weight: bold; color: #e67e22;">${trade.funding_costs} USDT</td>
                        </tr>
                        <tr>
                            <td style="padding: 12px; border: 1px solid #dee2e6;">æ»‘ç‚¹æˆæœ¬</td>
                            <td style="padding: 12px; border: 1px solid #dee2e6; text-align: right; font-weight: bold; color: #8e44ad;">${trade.slippage_costs} USDT</td>
                        </tr>
                        <tr>
                            <td style="padding: 12px; border: 1px solid #dee2e6; font-weight: bold;">æ€»æˆæœ¬</td>
                            <td style="padding: 12px; border: 1px solid #dee2e6; text-align: right; font-weight: bold; color: #d68910; background: #fff8e1;">${(trade.commission_costs + trade.funding_costs + trade.slippage_costs).toFixed(2)} USDT</td>
                        </tr>
                        
                        <tr>
                            <td rowspan="4" style="padding: 12px; border: 1px solid #dee2e6; background: #f3e5f5; font-weight: bold; vertical-align: top;">æ”¶ç›Šåˆ†æ</td>
                            <td style="padding: 12px; border: 1px solid #dee2e6;">æ¯›åˆ©æ¶¦</td>
                            <td style="padding: 12px; border: 1px solid #dee2e6; text-align: right; font-weight: bold; color: ${trade.gross_profit >= 0 ? 'green' : 'red'};">${trade.gross_profit} USDT</td>
                        </tr>
                        <tr>
                            <td style="padding: 12px; border: 1px solid #dee2e6; font-weight: bold;">å‡€åˆ©æ¶¦</td>
                            <td style="padding: 12px; border: 1px solid #dee2e6; text-align: right; font-weight: bold; color: ${trade.profit >= 0 ? 'green' : 'red'}; background: ${trade.profit >= 0 ? '#e8f5e8' : '#ffeaea'};">${trade.profit} USDT</td>
                        </tr>
                        <tr>
                            <td style="padding: 12px; border: 1px solid #dee2e6;">æ”¶ç›Šç‡</td>
                            <td style="padding: 12px; border: 1px solid #dee2e6; text-align: right; font-weight: bold; color: ${trade.profit_pct >= 0 ? 'green' : 'red'};">${trade.profit_pct}%</td>
                        </tr>
                        <tr>
                            <td style="padding: 12px; border: 1px solid #dee2e6;">å¹³ä»“åŸå› </td>
                            <td style="padding: 12px; border: 1px solid #dee2e6; text-align: right; font-weight: bold;">${trade.reason}</td>
                        </tr>
                    </tbody>
                </table>
            `;
            
            // Kçº¿å›¾å ä½
            document.getElementById('klineChart').innerHTML = '<p style="text-align: center; padding: 50px; color: #666;">ğŸ“ˆ Kçº¿å›¾å°†åœ¨æ­¤æ˜¾ç¤º</p>';
            
            modal.style.display = 'block';
        }
        
        function closeTradeDetail() {
            document.getElementById('tradeModal').style.display = 'none';
        }
        
        // ç‚¹å‡»å¼¹çª—å¤–éƒ¨å…³é—­
        window.onclick = function(event) {
            const modal = document.getElementById('tradeModal');
            if (event.target === modal) {
                modal.style.display = 'none';
            }
        }
        
        // ç¿»é¡µå‡½æ•°
        function updatePagination() {
            totalPages = Math.ceil(Math.max(1, allTrades.length) / pageSize);
            document.getElementById('currentPage').textContent = currentPage;
            document.getElementById('totalPages').textContent = totalPages;
        }
        
        function firstPage() {
            currentPage = 1;
            updatePagination();
        }
        
        function lastPage() {
            currentPage = totalPages;
            updatePagination();
        }
        
        function prevPage() {
            if (currentPage > 1) {
                currentPage--;
                updatePagination();
            }
        }
        
        function nextPage() {
            if (currentPage < totalPages) {
                currentPage++;
                updatePagination();
            }
        }
        
        function changePageSize() {
            pageSize = parseInt(document.getElementById('pageSize').value);
            currentPage = 1;
            updatePagination();
        }
        
        function showTab(tabName) {
            // éšè—æ‰€æœ‰æ ‡ç­¾é¡µå†…å®¹
            const contents = document.querySelectorAll('.tab-content');
            contents.forEach(content => content.classList.remove('active'));
            
            // ç§»é™¤æ‰€æœ‰æ ‡ç­¾çš„activeç±»
            const tabs = document.querySelectorAll('.tab');
            tabs.forEach(tab => tab.classList.remove('active'));
            
            // æ˜¾ç¤ºé€‰ä¸­çš„æ ‡ç­¾é¡µ
            document.getElementById(tabName).classList.add('active');
            event.target.classList.add('active');
        }
        
        // åˆå§‹åŒ–
        updatePagination();
    </script>
</body>
</html>